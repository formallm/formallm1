# FormaLLM è‡ªåŠ¨æ›´æ–°å®Œæ•´é…ç½®æŒ‡å—

## ğŸ“ ä»“åº“ä¿¡æ¯

- **GitHub åœ°å€**ï¼šhttps://github.com/formallm/formallm1
- **GitHub Pages**ï¼šhttps://formallm.github.io/formallm1/

---

## ğŸ”‘ éœ€è¦å‡†å¤‡çš„å†…å®¹

### 1. FormaLLM API Keyï¼ˆç«èµ›åå° API å¯†é’¥ï¼‰

#### è¿™æ˜¯ä»€ä¹ˆï¼Ÿ
- **ä¸æ˜¯ GitHub çš„å¯†é’¥**
- æ˜¯ç«èµ›å¹³å°æä¾›çš„ API è®¿é—®å¯†é’¥
- ç”¨äºä» `http://121.43.230.124` è·å–æ’è¡Œæ¦œæ•°æ®

#### å¦‚ä½•è·å–ï¼Ÿ
- è”ç³»ç«èµ›ä¸»åŠæ–¹ï¼ˆåº”è¯¥åœ¨ç«èµ›é€šçŸ¥ä¸­æä¾›ï¼‰
- æˆ–è€…åœ¨ç«èµ›ç®¡ç†åå°æŸ¥çœ‹

#### ç¤ºä¾‹æ ¼å¼ï¼š
```
your_formallm_api_key_12345abcde
```

### 2. GitHub Deploy Keyï¼ˆSSH å¯†é’¥ï¼Œç”¨äºæ¨é€ï¼‰

#### è¿™æ˜¯ä»€ä¹ˆï¼Ÿ
- **è¿™æ˜¯ GitHub çš„ SSH å¯†é’¥**
- è®©äº‘æœåŠ¡å™¨æœ‰æƒé™æ¨é€ä»£ç åˆ° GitHub ä»“åº“
- åœ¨æœåŠ¡å™¨ä¸Šç”Ÿæˆï¼Œæ·»åŠ åˆ° GitHub ä»“åº“è®¾ç½®

---

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### æ­¥éª¤ 1ï¼šæœ¬åœ°æ¨é€ä»£ç åˆ° GitHub

åœ¨æ‚¨çš„ Windows ç”µè„‘ä¸Šï¼š

```powershell
cd D:\HuaweiMoveData\Users\NERV\Desktop\alailab

# æ·»åŠ æ‰€æœ‰æ–°æ–‡ä»¶
git add formallm1/

# æäº¤
git commit -m "Add daily auto-update system"

# æ¨é€åˆ° GitHub
git push origin main
```

### æ­¥éª¤ 2ï¼šåœ¨äº‘æœåŠ¡å™¨ä¸Šé…ç½®

#### 2.1 å…‹éš†ä»“åº“

SSH ç™»å½•åˆ°äº‘æœåŠ¡å™¨åï¼š

```bash
# åˆ›å»ºé¡¹ç›®ç›®å½•
sudo mkdir -p /var/www
cd /var/www

# å…‹éš†ä»“åº“
sudo git clone https://github.com/formallm/formallm1.git

# è®¾ç½®æƒé™ï¼ˆå°† your-username æ›¿æ¢ä¸ºæ‚¨çš„ç”¨æˆ·åï¼‰
sudo chown -R your-username:your-username /var/www/formallm1

# è¿›å…¥é¡¹ç›®ç›®å½•
cd /var/www/formallm1
```

#### 2.2 é…ç½® Git ç”¨æˆ·ä¿¡æ¯

```bash
cd /var/www/formallm1

# é…ç½® Git ç”¨æˆ·åå’Œé‚®ç®±
git config user.name "FormaLLM AutoBot"
git config user.email "your-email@example.com"
```

#### 2.3 ç”Ÿæˆ SSH Deploy Key

```bash
# ç”Ÿæˆ SSH å¯†é’¥å¯¹
ssh-keygen -t ed25519 -C "formallm-server-deploy" -f ~/.ssh/formallm_deploy

# æ˜¾ç¤ºå…¬é’¥ï¼ˆå¤åˆ¶è¿™ä¸ªå†…å®¹ï¼Œä¸‹ä¸€æ­¥è¦ç”¨ï¼‰
cat ~/.ssh/formallm_deploy.pub
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIGx... formallm-server-deploy
```

å¤åˆ¶è¿™ä¸€æ•´è¡Œï¼

#### 2.4 æ·»åŠ  Deploy Key åˆ° GitHub

1. è®¿é—®ï¼šhttps://github.com/formallm/formallm1/settings/keys
2. ç‚¹å‡» **"Add deploy key"**
3. å¡«å†™ï¼š
   - **Title**ï¼š`Cloud Server Auto Update`
   - **Key**ï¼šç²˜è´´åˆšæ‰å¤åˆ¶çš„å…¬é’¥ï¼ˆå®Œæ•´çš„ä¸€è¡Œï¼‰
   - âœ… **é‡è¦ï¼å‹¾é€‰** `Allow write access`
4. ç‚¹å‡» **"Add key"**

#### 2.5 é…ç½® SSH ä½¿ç”¨è¿™ä¸ªå¯†é’¥

```bash
# åˆ›å»ºæˆ–ç¼–è¾‘ SSH é…ç½®æ–‡ä»¶
cat >> ~/.ssh/config << 'EOF'
Host github.com
    HostName github.com
    User git
    IdentityFile ~/.ssh/formallm_deploy
    IdentitiesOnly yes
EOF

# è®¾ç½®æƒé™
chmod 600 ~/.ssh/config
chmod 600 ~/.ssh/formallm_deploy

# æµ‹è¯• SSH è¿æ¥
ssh -T git@github.com
```

**æˆåŠŸçš„è¾“å‡º**ï¼š
```
Hi formallm! You've successfully authenticated, but GitHub does not provide shell access.
```

å¦‚æœçœ‹åˆ°è¿™ä¸ªæ¶ˆæ¯ï¼Œè¯´æ˜ SSH é…ç½®æˆåŠŸäº†ï¼âœ…

#### 2.6 è®¾ç½®è„šæœ¬æƒé™

```bash
cd /var/www/formallm1

# è®¾ç½®æ‰€æœ‰ shell è„šæœ¬ä¸ºå¯æ‰§è¡Œ
chmod +x server/*.sh
```

#### 2.7 é…ç½®å®šæ—¶ä»»åŠ¡

**é‡è¦ï¼šå°† `YOUR_API_KEY` æ›¿æ¢ä¸ºçœŸå®çš„ FormaLLM API Keyï¼**

```bash
cd /var/www/formallm1

# é…ç½®å®šæ—¶ä»»åŠ¡ï¼ˆæ›¿æ¢ä¸‹é¢çš„ YOUR_API_KEYï¼‰
bash server/setup_cron.sh YOUR_API_KEY
```

**ç¤ºä¾‹**ï¼š
```bash
# å‡è®¾æ‚¨çš„ API Key æ˜¯ abc123xyz
bash server/setup_cron.sh abc123xyz
```

è„šæœ¬ä¼šè¯¢é—®æ˜¯å¦ç«‹å³æµ‹è¯•ï¼Œ**å»ºè®®é€‰æ‹© `y`**ã€‚

---

## âœ… éªŒè¯é…ç½®

### 1. æ£€æŸ¥ Cron å®šæ—¶ä»»åŠ¡

```bash
crontab -l
```

**åº”è¯¥çœ‹åˆ°**ï¼š
```
# FormaLLM æ¯æ—¥è‡ªåŠ¨æ›´æ–° (23:00)
0 23 * * * cd /var/www/formallm1 && bash server/daily_update.sh YOUR_API_KEY >> logs/cron.log 2>&1
```

### 2. æ‰‹åŠ¨æµ‹è¯•æ‰§è¡Œ

```bash
cd /var/www/formallm1

# æ‰‹åŠ¨æ‰§è¡Œä¸€æ¬¡ï¼ˆæ›¿æ¢ YOUR_API_KEYï¼‰
bash server/daily_update.sh YOUR_API_KEY
```

**é¢„æœŸè¾“å‡º**ï¼š
```
==========================================
ğŸŒ™ æ¯æ—¥è‡ªåŠ¨æ›´æ–°ä»»åŠ¡å¼€å§‹
==========================================
â„¹ï¸  INFO: æ‰§è¡Œæ—¶é—´: 2025-11-06 16:30:00
â„¹ï¸  INFO: é¡¹ç›®ç›®å½•: /var/www/formallm1

==========================================
ğŸ“¥ æ­¥éª¤ 0/3: åŒæ­¥è¿œç¨‹ä»“åº“
==========================================
æ‹‰å–æœ€æ–°ä»£ç ...
âœ… ä»£ç åŒæ­¥æˆåŠŸ

==========================================
ğŸ“Š æ­¥éª¤ 1/3: æ›´æ–°æ’è¡Œæ¦œæ•°æ®
==========================================
æ‰§è¡Œæ’è¡Œæ¦œæ›´æ–°è„šæœ¬...
ğŸ“¡ è·å–æ¯æ—¥æ’è¡Œæ¦œ...
âœ… æˆåŠŸè·å–æ¯æ—¥æ’è¡Œæ¦œ
âœ… æ’è¡Œæ¦œæ›´æ–°æˆåŠŸ

==========================================
ğŸ“¦ æ­¥éª¤ 2/3: åŒæ­¥ç¬¬äºŒå¤©èµ›é¢˜
==========================================
æ‰§è¡Œèµ›é¢˜åŒæ­¥è„šæœ¬...
âœ… èµ›é¢˜åŒæ­¥å®Œæˆ

==========================================
ğŸš€ æ­¥éª¤ 3/3: æäº¤å¹¶æ¨é€åˆ° GitHub
==========================================
å˜æ›´æ‘˜è¦:
M  assets/data/leaderboard.json
ğŸ’¾ æäº¤å˜æ›´...
âœ… æäº¤æˆåŠŸ
ğŸ“¤ æ¨é€åˆ° GitHub...
âœ… æ¨é€æˆåŠŸ

==========================================
âœ… æ¯æ—¥æ›´æ–°ä»»åŠ¡å…¨éƒ¨å®Œæˆ
==========================================
â„¹ï¸  INFO: æ›´æ–°å†…å®¹:
â„¹ï¸  INFO:   âœ“ æ’è¡Œæ¦œæ•°æ®ï¼ˆå½“æ—¥æ—¥æ¦œ + æ€»æ¦œï¼‰
â„¹ï¸  INFO:   âœ“ ç¬¬äºŒå¤©èµ›é¢˜æ–‡ä»¶ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
â„¹ï¸  INFO:   âœ“ å·²æ¨é€åˆ° GitHub Pages

ğŸ‰ ç½‘ç«™å°†åœ¨ 1-2 åˆ†é’Ÿå†…è‡ªåŠ¨æ›´æ–°
```

### 3. æ£€æŸ¥ GitHub æäº¤

è®¿é—®ï¼šhttps://github.com/formallm/formallm1/commits/main

åº”è¯¥èƒ½çœ‹åˆ°æ–°çš„æäº¤è®°å½•ã€‚

### 4. æ£€æŸ¥ç½‘ç«™æ›´æ–°

ç­‰å¾… 1-2 åˆ†é’Ÿåï¼Œè®¿é—®ï¼š
- **æ’è¡Œæ¦œ**ï¼šhttps://formallm.github.io/formallm1/cn/leaderboard-lean.html
- **ä¸‹è½½é¡µ**ï¼šhttps://formallm.github.io/formallm1/cn/downloads.html

---

## ğŸ“… å‡†å¤‡èµ›é¢˜æ–‡ä»¶

### æ–‡ä»¶å‘½åè§„åˆ™

```
æ ¼å¼ï¼š{track}_{MMDD}.jsonl

ç¤ºä¾‹ï¼š
  lean_1107.jsonl    â†’ 11æœˆ7æ—¥ Lean èµ›é¢˜
  litex_1107.jsonl   â†’ 11æœˆ7æ—¥ Litex èµ›é¢˜
```

### ä¸Šä¼ èµ›é¢˜æ–‡ä»¶

#### æ–¹å¼ 1ï¼šä»æœ¬åœ°ä¸Šä¼ 

```bash
# ä¸Šä¼ åˆ°æœåŠ¡å™¨
scp lean_1107.jsonl user@server-ip:/var/www/formallm1/assets/files/
scp litex_1107.jsonl user@server-ip:/var/www/formallm1/assets/files/
```

#### æ–¹å¼ 2ï¼šåœ¨æœåŠ¡å™¨ä¸Šç›´æ¥åˆ›å»º

```bash
# SSH ç™»å½•æœåŠ¡å™¨å
cd /var/www/formallm1/assets/files/

# åˆ›å»ºæˆ–ç¼–è¾‘æ–‡ä»¶
nano lean_1107.jsonl

# æˆ–è€…ä¸Šä¼ å·²å‡†å¤‡å¥½çš„æ–‡ä»¶
```

### éªŒè¯æ–‡ä»¶

```bash
cd /var/www/formallm1

# æŸ¥çœ‹æ–‡ä»¶åˆ—è¡¨
ls -lh assets/files/*.jsonl

# æ£€æŸ¥æ–‡ä»¶æ ¼å¼
head -3 assets/files/lean_1107.jsonl
```

---

## ğŸ” å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜ 1ï¼šAPI Key åœ¨å“ªé‡Œè·å–ï¼Ÿ

**ç­”æ¡ˆ**ï¼š
1. è”ç³»ç«èµ›ä¸»åŠæ–¹ï¼ˆèš‚èšæ•°ç§‘æˆ– CCFï¼‰
2. æ£€æŸ¥ç«èµ›é‚®ä»¶æˆ–é€šçŸ¥æ–‡æ¡£
3. ç™»å½•ç«èµ›ç®¡ç†åå°æŸ¥çœ‹
4. å¦‚æœæ‰¾ä¸åˆ°ï¼Œå¯ä»¥ä¸´æ—¶ä½¿ç”¨æ‰‹åŠ¨æ›´æ–°æ–¹å¼

### é—®é¢˜ 2ï¼šPush æ¨é€å¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼š
```
Permission denied (publickey)
```

**è§£å†³æ–¹æ³•**ï¼š
```bash
# 1. æ£€æŸ¥ SSH å¯†é’¥é…ç½®
cat ~/.ssh/config

# 2. æµ‹è¯• GitHub è¿æ¥
ssh -T git@github.com

# 3. å¦‚æœå¤±è´¥ï¼Œé‡æ–°ç”Ÿæˆå¯†é’¥å¹¶æ·»åŠ åˆ° GitHub
ssh-keygen -t ed25519 -C "formallm" -f ~/.ssh/formallm_deploy
cat ~/.ssh/formallm_deploy.pub
# å¤åˆ¶è¾“å‡ºï¼Œæ·»åŠ åˆ° GitHub Deploy Keys
```

### é—®é¢˜ 3ï¼šCron ä¸æ‰§è¡Œ

**æ’æŸ¥æ­¥éª¤**ï¼š
```bash
# 1. æ£€æŸ¥ Cron æœåŠ¡çŠ¶æ€
sudo systemctl status cron

# 2. æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—
sudo grep CRON /var/log/syslog | tail -20

# 3. æ£€æŸ¥è„šæœ¬æƒé™
ls -l /var/www/formallm1/server/*.sh

# 4. æŸ¥çœ‹ Cron æ—¥å¿—
tail -50 /var/www/formallm1/logs/cron.log
```

### é—®é¢˜ 4ï¼šGitHub Pages æ²¡æœ‰æ›´æ–°

**å¯èƒ½åŸå› **ï¼š
1. GitHub Actions å¯èƒ½è¢«ç¦ç”¨
2. GitHub Pages è®¾ç½®æœªå¯ç”¨

**è§£å†³æ–¹æ³•**ï¼š

1. è®¿é—®ï¼šhttps://github.com/formallm/formallm1/settings/pages
2. ç¡®ä¿ **Source** è®¾ç½®ä¸º **Deploy from a branch**
3. **Branch** è®¾ç½®ä¸º **main** å’Œ **/ (root)**
4. ç‚¹å‡» **Save**

---

## ğŸ“Š å·¥ä½œæµç¨‹å›¾

```
æ¯å¤©ä¸‹åˆ 16:00
   â”‚
   â”œâ”€ æ‚¨å‡†å¤‡å¥½æ˜å¤©çš„èµ›é¢˜
   â”‚  lean_1107.jsonl
   â”‚  litex_1107.jsonl
   â”‚
   â””â”€ ä¸Šä¼ åˆ°æœåŠ¡å™¨
      /var/www/formallm1/assets/files/
          â†“
æ¯å¤©æ™šä¸Š 23:00
   â”‚
   â”œâ”€ Cron è‡ªåŠ¨è§¦å‘
   â”‚  daily_update.sh
   â”‚
   â”œâ”€ æ­¥éª¤ 1ï¼šæ›´æ–°æ’è¡Œæ¦œ
   â”‚  fetch_leaderboard.py
   â”‚  â”œâ”€ è°ƒç”¨ FormaLLM APIï¼ˆéœ€è¦ API Keyï¼‰
   â”‚  â”œâ”€ è·å–å½“æ—¥æ—¥æ¦œ
   â”‚  â”œâ”€ è·å–æ€»æ¦œ
   â”‚  â””â”€ ä¿å­˜åˆ° leaderboard.json
   â”‚
   â”œâ”€ æ­¥éª¤ 2ï¼šåŒæ­¥èµ›é¢˜
   â”‚  sync_daily_problems.sh
   â”‚  â”œâ”€ æ£€æŸ¥ç¬¬äºŒå¤©çš„èµ›é¢˜æ–‡ä»¶
   â”‚  â””â”€ å¦‚æœå­˜åœ¨åˆ™æ·»åŠ åˆ° Git
   â”‚
   â”œâ”€ æ­¥éª¤ 3ï¼šæ¨é€åˆ° GitHub
   â”‚  git commit && git push
   â”‚  â””â”€ ä½¿ç”¨ Deploy Key æ¨é€ï¼ˆéœ€è¦ SSHï¼‰
   â”‚
   â””â”€ 23:01 æ¨é€å®Œæˆ
          â†“
GitHub Pages è‡ªåŠ¨éƒ¨ç½²ï¼ˆ1-2åˆ†é’Ÿï¼‰
          â†“
23:03 ç½‘ç«™æ›´æ–°å®Œæˆ âœ¨
```

---

## ğŸ“ é…ç½®æ¸…å•

### âœ… å¿…é¡»å®Œæˆçš„é…ç½®

- [ ] **FormaLLM API Key**
  - [ ] è·å– API Key
  - [ ] é…ç½®åˆ° Cron ä»»åŠ¡ä¸­
  
- [ ] **GitHub Deploy Keyï¼ˆSSHï¼‰**
  - [ ] åœ¨æœåŠ¡å™¨ç”Ÿæˆ SSH å¯†é’¥
  - [ ] æ·»åŠ å…¬é’¥åˆ° GitHub
  - [ ] âœ… å‹¾é€‰ "Allow write access"
  - [ ] é…ç½® SSH config
  - [ ] æµ‹è¯• `ssh -T git@github.com` æˆåŠŸ
  
- [ ] **Git é…ç½®**
  - [ ] è®¾ç½® `git config user.name`
  - [ ] è®¾ç½® `git config user.email`
  
- [ ] **Cron å®šæ—¶ä»»åŠ¡**
  - [ ] è¿è¡Œ `setup_cron.sh`
  - [ ] éªŒè¯ `crontab -l` èƒ½çœ‹åˆ°ä»»åŠ¡
  
- [ ] **æµ‹è¯•æ‰§è¡Œ**
  - [ ] æ‰‹åŠ¨æ‰§è¡Œ `daily_update.sh` æˆåŠŸ
  - [ ] GitHub å‡ºç°æäº¤è®°å½•
  - [ ] ç½‘ç«™èƒ½æ˜¾ç¤ºæœ€æ–°æ•°æ®

### âœ… å¯é€‰é…ç½®

- [ ] **GitHub Pages**
  - [ ] å¯ç”¨ GitHub Pages
  - [ ] è®¾ç½®ä¸º main åˆ†æ”¯
  
- [ ] **èµ›é¢˜æ–‡ä»¶**
  - [ ] å‡†å¤‡ç¬¬äºŒå¤©çš„èµ›é¢˜
  - [ ] ä¸Šä¼ åˆ°æœåŠ¡å™¨

---

## ğŸ‰ å®Œæˆéƒ¨ç½²

å½“æ‚¨çœ‹åˆ°ä»¥ä¸‹å†…å®¹ï¼Œè¯´æ˜é…ç½®æˆåŠŸï¼š

1. âœ… `crontab -l` èƒ½çœ‹åˆ°å®šæ—¶ä»»åŠ¡
2. âœ… `ssh -T git@github.com` æ˜¾ç¤ºè®¤è¯æˆåŠŸ
3. âœ… æ‰‹åŠ¨æ‰§è¡Œè„šæœ¬èƒ½æˆåŠŸæ¨é€åˆ° GitHub
4. âœ… GitHub ä»“åº“æœ‰æ–°çš„æäº¤è®°å½•
5. âœ… ç½‘ç«™èƒ½æ˜¾ç¤ºæœ€æ–°æ•°æ®

**ğŸŠ æ­å–œï¼ç³»ç»Ÿå°†åœ¨æ¯æ™š 23:00 è‡ªåŠ¨è¿è¡Œï¼**

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

### è”ç³»æ–¹å¼
- æŸ¥çœ‹æ—¥å¿—ï¼š`tail -50 /var/www/formallm1/logs/cron.log`
- æŸ¥çœ‹è¯¦ç»†æŒ‡å—ï¼š`æ¯æ—¥æ›´æ–°éƒ¨ç½²æŒ‡å—.md`
- æŸ¥çœ‹é€ŸæŸ¥æ‰‹å†Œï¼š`æ¯æ—¥æ›´æ–°-é€ŸæŸ¥æ‰‹å†Œ.md`

### é‡è¦æ–‡ä»¶
- **ä¸»è„šæœ¬**ï¼š`server/daily_update.sh`
- **æ’è¡Œæ¦œè·å–**ï¼š`server/fetch_leaderboard.py`
- **èµ›é¢˜åŒæ­¥**ï¼š`server/sync_daily_problems.sh`
- **Cron é…ç½®**ï¼š`server/setup_cron.sh`

---

**æœ€åæ›´æ–°**ï¼š2025-11-06

