# äº‘æœåŠ¡å™¨å‘½ä»¤é€ŸæŸ¥è¡¨

## ğŸš€ é¦–æ¬¡éƒ¨ç½²

```bash
# 1. ç™»å½•äº‘æœåŠ¡å™¨
ssh your-username@your-server-ip

# 2. å…‹éš†ä»“åº“
cd /var/www
git clone https://github.com/your-username/alailab.git formallm1

# 3. è¿è¡Œå¿«é€Ÿé…ç½®
cd formallm1
chmod +x server/QUICK_SETUP.sh
bash server/QUICK_SETUP.sh
```

---

## ğŸ”§ å¸¸ç”¨æ“ä½œå‘½ä»¤

### æ‰‹åŠ¨æ›´æ–°æ•°æ®

```bash
cd /var/www/formallm1
bash server/auto_update.sh YOUR_API_KEY preliminary
```

### åªæ›´æ–°æ’è¡Œæ¦œ

```bash
cd /var/www/formallm1
python3 server/fetch_leaderboard.py YOUR_API_KEY preliminary
```

### åªæ›´æ–°èµ›é¢˜

```bash
cd /var/www/formallm1
python3 server/fetch_problems.py YOUR_API_KEY
```

### æŸ¥çœ‹å®šæ—¶ä»»åŠ¡

```bash
crontab -l
```

### ç¼–è¾‘å®šæ—¶ä»»åŠ¡

```bash
crontab -e
```

### åˆ é™¤æ‰€æœ‰å®šæ—¶ä»»åŠ¡

```bash
crontab -r
```

---

## ğŸ“Š æŸ¥çœ‹æ—¥å¿—

### å®æ—¶æ—¥å¿—

```bash
# Cron æ‰§è¡Œæ—¥å¿—
tail -f /var/www/formallm1/logs/cron.log

# ä»Šæ—¥è¯¦ç»†æ—¥å¿—
tail -f /var/www/formallm1/logs/update_$(date +%Y%m%d).log
```

### å†å²æ—¥å¿—

```bash
# æŸ¥çœ‹æœ€è¿‘ 50 è¡Œ
tail -50 /var/www/formallm1/logs/cron.log

# æŸ¥çœ‹æŸå¤©çš„æ—¥å¿—
cat /var/www/formallm1/logs/update_20251106.log

# æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—æ–‡ä»¶
ls -lh /var/www/formallm1/logs/
```

---

## ğŸ” æ£€æŸ¥çŠ¶æ€

### Git çŠ¶æ€

```bash
cd /var/www/formallm1

# æŸ¥çœ‹æœ€è¿‘æäº¤
git log --oneline -5

# æŸ¥çœ‹å½“å‰çŠ¶æ€
git status

# æŸ¥çœ‹è¿œç¨‹åœ°å€
git remote -v
```

### æ•°æ®æ–‡ä»¶

```bash
cd /var/www/formallm1

# æŸ¥çœ‹æ’è¡Œæ¦œæ•°æ®
cat assets/data/leaderboard.json | python3 -m json.tool | less

# æŸ¥çœ‹ä¸‹è½½é…ç½®
cat assets/data/downloads.json | python3 -m json.tool | less

# æŸ¥çœ‹èµ›é¢˜æ–‡ä»¶åˆ—è¡¨
ls -lh assets/files/*.jsonl

# æŸ¥çœ‹æŸä¸ªèµ›é¢˜æ–‡ä»¶
head -3 assets/files/lean_1106.jsonl
```

### æŸ¥çœ‹æ•°æ®æ›´æ–°æ—¶é—´

```bash
cd /var/www/formallm1

# æ’è¡Œæ¦œæ›´æ–°æ—¶é—´
cat assets/data/leaderboard.json | python3 -c "import json,sys; print('æ›´æ–°æ—¶é—´:', json.load(sys.stdin)['lastUpdated'])"

# ä¸‹è½½é…ç½®æ›´æ–°æ—¶é—´
cat assets/data/downloads.json | python3 -c "import json,sys; print('æ›´æ–°æ—¶é—´:', json.load(sys.stdin)['lastUpdated'])"
```

---

## ğŸ§ª æµ‹è¯•å‘½ä»¤

### æµ‹è¯• API è¿æ¥

```bash
# æµ‹è¯•æ’è¡Œæ¦œ APIï¼ˆæ€»æ¦œï¼‰
curl -H "X-API-Key: YOUR_API_KEY" \
  "http://121.43.230.124/ranking_list/overall?stage=practice"

# æµ‹è¯•æ’è¡Œæ¦œ APIï¼ˆæ¯æ—¥æ¦œï¼‰
curl -H "X-API-Key: YOUR_API_KEY" \
  "http://121.43.230.124/ranking_list/daily?stage=preliminary&dt=$(date +%Y-%m-%d)"

# æµ‹è¯•èµ›é¢˜ API
curl -H "X-API-Key: YOUR_API_KEY" \
  "http://121.43.230.124/problems/daily?date=$(date +%Y-%m-%d)&track=lean"
```

### æµ‹è¯• GitHub è¿æ¥

```bash
# æµ‹è¯• SSH
ssh -T git@github.com

# æµ‹è¯• Git æ¨é€
cd /var/www/formallm1
git push --dry-run
```

### æµ‹è¯• Python è„šæœ¬

```bash
cd /var/www/formallm1

# æµ‹è¯•æ’è¡Œæ¦œè„šæœ¬
python3 server/fetch_leaderboard.py YOUR_API_KEY preliminary

# æµ‹è¯•èµ›é¢˜è„šæœ¬
python3 server/fetch_problems.py YOUR_API_KEY

# æŸ¥çœ‹ç”Ÿæˆçš„æ–‡ä»¶
ls -lh assets/data/
ls -lh assets/files/
```

---

## ğŸ”„ ä¿®æ”¹é…ç½®

### ä¿®æ”¹æ›´æ–°é¢‘ç‡

```bash
# ç¼–è¾‘ Cron
crontab -e

# ç¤ºä¾‹é…ç½®ï¼š
# æ¯å°æ—¶:      0 * * * * ...
# æ¯2å°æ—¶:     0 */2 * * * ...
# æ¯å¤©3ç‚¹:     0 3 * * * ...
# æ¯å¤©2ç‚¹14ç‚¹: 0 2,14 * * * ...
```

### ä¿®æ”¹ API ç«¯ç‚¹

```bash
# ç¼–è¾‘è„šæœ¬
nano /var/www/formallm1/server/fetch_leaderboard.py
nano /var/www/formallm1/server/fetch_problems.py

# ä¿®æ”¹ API_BASE_URL å˜é‡ï¼ˆç¬¬ 14 è¡Œå·¦å³ï¼‰
```

### ä¿®æ”¹æ¯”èµ›é˜¶æ®µ

```bash
# ç¼–è¾‘ Cronï¼Œå°† preliminary æ”¹ä¸º practice
crontab -e
```

---

## ğŸ› ï¸ æ•…éšœæ’æŸ¥

### æ¨é€å¤±è´¥

```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯
cd /var/www/formallm1
git push origin main -v

# æ£€æŸ¥ Deploy Key æƒé™
# è®¿é—®: https://github.com/your-username/alailab/settings/keys
# ç¡®ä¿å‹¾é€‰äº† "Allow write access"

# é‡æ–°æµ‹è¯• SSH
ssh -T git@github.com
```

### æ•°æ®è·å–å¤±è´¥

```bash
# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
tail -50 /var/www/formallm1/logs/update_$(date +%Y%m%d).log

# æ‰‹åŠ¨æµ‹è¯• API
curl -v -H "X-API-Key: YOUR_API_KEY" \
  "http://121.43.230.124/ranking_list/overall?stage=practice"

# æ£€æŸ¥ç½‘ç»œ
ping 121.43.230.124
```

### å®šæ—¶ä»»åŠ¡ä¸æ‰§è¡Œ

```bash
# æ£€æŸ¥ Cron æœåŠ¡
sudo systemctl status cron

# æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—
sudo grep CRON /var/log/syslog | tail -20

# æ£€æŸ¥è„šæœ¬æƒé™
ls -l /var/www/formallm1/server/auto_update.sh
# åº”è¯¥æ˜¯: -rwxr-xr-x
```

### Git å†²çª

```bash
cd /var/www/formallm1

# é‡ç½®åˆ°è¿œç¨‹ç‰ˆæœ¬
git fetch origin
git reset --hard origin/main

# æ¸…ç†æœªè·Ÿè¸ªæ–‡ä»¶
git clean -fd

# é‡æ–°æ‰§è¡Œ
bash server/auto_update.sh YOUR_API_KEY preliminary
```

---

## ğŸ§¹ ç»´æŠ¤å‘½ä»¤

### æ¸…ç†æ—¥å¿—

```bash
# åˆ é™¤ 30 å¤©å‰çš„æ—¥å¿—
find /var/www/formallm1/logs -name "*.log" -mtime +30 -delete

# æŸ¥çœ‹æ—¥å¿—ç›®å½•å¤§å°
du -sh /var/www/formallm1/logs/
```

### æ›´æ–°ä»£ç 

```bash
cd /var/www/formallm1

# æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# é‡æ–°å®‰è£…ä¾èµ–ï¼ˆå¦‚æœæœ‰æ›´æ–°ï¼‰
pip3 install -r server/requirements.txt
```

### åœæ­¢è‡ªåŠ¨æ›´æ–°

```bash
# ç§»é™¤å®šæ—¶ä»»åŠ¡
crontab -e
# åˆ é™¤ç›¸å…³è¡Œï¼Œä¿å­˜é€€å‡º

# æˆ–æ¸…ç©ºæ‰€æœ‰å®šæ—¶ä»»åŠ¡
crontab -r
```

### é‡æ–°å¯åŠ¨è‡ªåŠ¨æ›´æ–°

```bash
cd /var/www/formallm1

# é‡æ–°é…ç½®
bash server/QUICK_SETUP.sh
```

---

## ğŸ“ Cron æ—¶é—´è¡¨è¾¾å¼é€ŸæŸ¥

```
* * * * *
â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â””â”€ æ˜ŸæœŸå‡  (0-7, 0å’Œ7éƒ½è¡¨ç¤ºå‘¨æ—¥)
â”‚ â”‚ â”‚ â””â”€â”€â”€ æœˆä»½ (1-12)
â”‚ â”‚ â””â”€â”€â”€â”€â”€ æ—¥æœŸ (1-31)
â”‚ â””â”€â”€â”€â”€â”€â”€â”€ å°æ—¶ (0-23)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€ åˆ†é’Ÿ (0-59)
```

**ç¤ºä¾‹**ï¼š
```
0 2 * * *        # æ¯å¤© 2:00
0 */6 * * *      # æ¯ 6 å°æ—¶
*/30 * * * *     # æ¯ 30 åˆ†é’Ÿ
0 2,14 * * *     # æ¯å¤© 2:00 å’Œ 14:00
0 9-17 * * 1-5   # å·¥ä½œæ—¥ 9:00-17:00 æ¯å°æ—¶
```

---

## ğŸ’¡ æœ€ä½³å®è·µ

1. **å…ˆåœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯**
   - æ‰‹åŠ¨è¿è¡Œè„šæœ¬ç¡®ä¿æ— è¯¯
   - æ£€æŸ¥ GitHub æäº¤å’Œ Pages æ›´æ–°
   - å†é…ç½®å®šæ—¶ä»»åŠ¡

2. **ç›‘æ§æœ€åˆå‡ å¤©**
   - æ¯å¤©æŸ¥çœ‹æ—¥å¿—ç¡®ä¿æ­£å¸¸
   - æ£€æŸ¥æ•°æ®æ˜¯å¦å‡†ç¡®
   - ç¡®è®¤æ²¡æœ‰é‡å¤æäº¤

3. **è®¾ç½®å‘Šè­¦ï¼ˆå¯é€‰ï¼‰**
   - é…ç½®é‚®ä»¶é€šçŸ¥
   - ä½¿ç”¨ç›‘æ§æœåŠ¡

4. **å®šæœŸç»´æŠ¤**
   - æ¯å‘¨æŸ¥çœ‹ä¸€æ¬¡æ—¥å¿—
   - æ¯æœˆæ¸…ç†æ—§æ—¥å¿—
   - æ¯å­£åº¦æ›´æ¢å¯†é’¥

---

**ä¿å­˜æ­¤æ–‡ä»¶ä»¥ä¾¿éšæ—¶æŸ¥é˜…ï¼** ğŸ“Œ


