╔══════════════════════════════════════════════════════════════╗
║  FormaLLM 云服务器自动更新 - 快速开始指南                    ║
╚══════════════════════════════════════════════════════════════╝

📋 您需要做什么？
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

✅ 第一步：在本地推送代码到 GitHub
─────────────────────────────────────────────
在您的 Windows 电脑上执行：

  1. 打开 PowerShell
  2. cd D:\HuaweiMoveData\Users\NERV\Desktop\alailab
  3. git add formallm1/
  4. git commit -m "Add auto-update server scripts"
  5. git push origin main


✅ 第二步：在云服务器上配置
─────────────────────────────────────────────
SSH 登录到您的云服务器，然后执行：

  ssh your-username@your-server-ip
  
  cd /var/www
  git clone https://github.com/your-username/alailab.git formallm1
  cd formallm1
  chmod +x server/QUICK_SETUP.sh
  bash server/QUICK_SETUP.sh

  按照提示操作即可！


✅ 第三步：配置 GitHub Deploy Key
─────────────────────────────────────────────
脚本会生成 SSH 公钥，您需要：

  1. 复制脚本显示的公钥
  2. 访问: https://github.com/你的用户名/alailab/settings/keys
  3. 点击 "Add deploy key"
  4. Title: Cloud Server Auto Update
  5. 粘贴公钥
  6. ✅ 勾选 "Allow write access"（重要！）
  7. 点击 "Add key"


✅ 第四步：验证部署
─────────────────────────────────────────────
在云服务器上测试：

  cd /var/www/formallm1
  bash server/auto_update.sh YOUR_API_KEY preliminary
  
  检查：
  • tail -20 logs/cron.log      （查看日志）
  • git log -1                  （查看提交）
  • crontab -l                  （查看定时任务）


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📚 详细文档
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  📘 详细部署指南:   formallm1/SERVER_DEPLOYMENT_GUIDE.md
  📗 简明版指南:     formallm1/部署指南-简明版.md
  📙 命令速查表:     formallm1/server/命令速查表.md
  📕 脚本说明:       formallm1/server/README.md


🎯 实现的功能
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  ✅ 每天自动获取排行榜数据（API）
  ✅ 每天自动获取新赛题文件（API）
  ✅ 自动保存为 lean_MMDD.jsonl 和 litex_MMDD.jsonl
  ✅ 自动更新 downloads.json 配置
  ✅ 自动计算文件 MD5
  ✅ 自动提交到 GitHub
  ✅ 自动推送到 GitHub
  ✅ GitHub Pages 自动部署
  ✅ 下载页面自动显示新赛题


📁 新增/修改的文件
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  ⭐ NEW   server/fetch_problems.py       - 获取每日赛题
  ⭐ NEW   server/QUICK_SETUP.sh          - 快速配置脚本
  ⭐ NEW   SERVER_DEPLOYMENT_GUIDE.md     - 详细部署指南
  ⭐ NEW   部署指南-简明版.md             - 简明指南
  ⭐ NEW   server/命令速查表.md           - 常用命令
  🔄 MOD   server/auto_update.sh          - 增强版自动更新


⏰ 默认定时计划
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  每天 2:00  - 凌晨更新（低峰期）
  每天 14:00 - 下午更新（工作时间）


🔍 监控命令（在云服务器上）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  # 查看实时日志
  tail -f /var/www/formallm1/logs/cron.log
  
  # 查看最近提交
  cd /var/www/formallm1 && git log --oneline -5
  
  # 手动触发更新
  cd /var/www/formallm1 && bash server/auto_update.sh YOUR_API_KEY preliminary


⚠️  重要提醒
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  1. 将所有 YOUR_API_KEY 替换为真实的 API Key
  2. 将 your-username 替换为您的 GitHub 用户名
  3. 确认 API 端点是否正确
  4. Deploy Key 必须勾选 "Allow write access"


🎉 准备好了吗？
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  现在就开始部署吧！按照上面的步骤操作即可。
  
  有问题？查看详细文档：
  • SERVER_DEPLOYMENT_GUIDE.md
  • 部署指南-简明版.md

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


