# äº‘æœåŠ¡å™¨è‡ªåŠ¨æ›´æ–° - å¿«é€Ÿéƒ¨ç½²æŒ‡å—

## ğŸ¯ ç›®æ ‡

å®ç°äº‘æœåŠ¡å™¨æ¯å¤©è‡ªåŠ¨ï¼š
1. âœ… ä» API è·å–æ’è¡Œæ¦œæ•°æ®
2. âœ… ä» API è·å–å½“æ—¥èµ›é¢˜æ–‡ä»¶
3. âœ… è‡ªåŠ¨æ¨é€åˆ° GitHub
4. âœ… GitHub Pages è‡ªåŠ¨éƒ¨ç½²æ›´æ–°

---

## ğŸ“ å½“å‰çŠ¶å†µ

- **æœ¬åœ°ç”µè„‘**: Windowsï¼Œä»£ç å·²å‡†å¤‡å¥½
- **äº‘æœåŠ¡å™¨**: Linuxï¼Œéœ€è¦é…ç½®
- **GitHub**: ä»“åº“å·²åˆ›å»ºï¼ŒGitHub Pages å·²å¯ç”¨
- **API**: `http://121.43.230.124`ï¼Œæœ‰ API Key

---

## ğŸš€ éƒ¨ç½²æ­¥éª¤ï¼ˆåœ¨äº‘æœåŠ¡å™¨ä¸Šæ“ä½œï¼‰

### ç¬¬ä¸€æ­¥ï¼šä¸Šä¼ ä»£ç åˆ° GitHubï¼ˆåœ¨æœ¬åœ°å®Œæˆï¼‰

```powershell
# åœ¨æœ¬åœ°ç”µè„‘ PowerShell ä¸­æ‰§è¡Œ
cd D:\HuaweiMoveData\Users\NERV\Desktop\alailab

# ç¡®ä¿æ‰€æœ‰æ–°æ–‡ä»¶éƒ½å·²æ·»åŠ 
git add formallm1/server/

# æäº¤
git commit -m "Add auto-update scripts for cloud server"

# æ¨é€åˆ° GitHub
git push origin main
```

### ç¬¬äºŒæ­¥ï¼šç™»å½•äº‘æœåŠ¡å™¨

```bash
# SSH ç™»å½•ï¼ˆè¯·æ›¿æ¢ä¸ºæ‚¨çš„å®é™…ä¿¡æ¯ï¼‰
ssh your-username@your-server-ip
```

### ç¬¬ä¸‰æ­¥ï¼šå…‹éš†ä»“åº“

```bash
# åˆ›å»ºç›®å½•
sudo mkdir -p /var/www
cd /var/www

# å…‹éš† GitHub ä»“åº“
git clone https://github.com/your-username/alailab.git formallm1

# æˆ–ä½¿ç”¨ SSH
git clone git@github.com:your-username/alailab.git formallm1

# è¿›å…¥é¡¹ç›®ç›®å½•
cd formallm1
```

### ç¬¬å››æ­¥ï¼šè¿è¡Œå¿«é€Ÿé…ç½®è„šæœ¬

```bash
cd /var/www/formallm1

# è®¾ç½®æ‰§è¡Œæƒé™
chmod +x server/QUICK_SETUP.sh

# è¿è¡Œé…ç½®è„šæœ¬
bash server/QUICK_SETUP.sh
```

**è„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆï¼š**
1. âœ… å®‰è£…ç³»ç»Ÿä¾èµ–ï¼ˆPython3, Gitï¼‰
2. âœ… å®‰è£… Python åº“ï¼ˆrequestsï¼‰
3. âœ… é…ç½® Git ç”¨æˆ·ä¿¡æ¯
4. âœ… é…ç½® GitHub æ¨é€æƒé™ï¼ˆSSH æˆ– Tokenï¼‰
5. âœ… æµ‹è¯• API è¿æ¥
6. âœ… æµ‹è¯•æ•°æ®è·å–
7. âœ… é…ç½®å®šæ—¶ä»»åŠ¡ï¼ˆCronï¼‰

**æŒ‰ç…§æç¤ºæ“ä½œå³å¯ï¼**

---

## âš™ï¸ é…ç½® GitHub æ¨é€æƒé™

### æ–¹å¼ A: SSH Deploy Keyï¼ˆæ¨èï¼‰

è„šæœ¬ä¼šç”Ÿæˆ SSH å¯†é’¥ï¼Œæ‚¨éœ€è¦ï¼š

1. **å¤åˆ¶å…¬é’¥**ï¼ˆè„šæœ¬ä¼šæ˜¾ç¤ºï¼‰
2. **æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®**ï¼š
   ```
   https://github.com/your-username/alailab/settings/keys
   ```
3. **ç‚¹å‡»** `Add deploy key`
4. **å¡«å†™**ï¼š
   - Title: `Cloud Server Auto Update`
   - Key: ç²˜è´´å…¬é’¥
   - âœ… **å¿…é¡»å‹¾é€‰** `Allow write access`
5. **ç‚¹å‡»** `Add key`

### æ–¹å¼ B: Personal Access Token

1. **è®¿é—®**ï¼šhttps://github.com/settings/tokens/new
2. **æƒé™**: å‹¾é€‰ `repo`ï¼ˆå®Œæ•´æƒé™ï¼‰
3. **ç”Ÿæˆ** Token
4. **å¤åˆ¶** Token å¹¶åœ¨è„šæœ¬ä¸­è¾“å…¥

---

## âœ… éªŒè¯éƒ¨ç½²

### 1. æ‰‹åŠ¨æµ‹è¯•ä¸€æ¬¡

```bash
cd /var/www/formallm1

# æ‰‹åŠ¨æ‰§è¡Œæ›´æ–°ï¼ˆæ›¿æ¢ YOUR_API_KEYï¼‰
bash server/auto_update.sh YOUR_API_KEY preliminary

# æŸ¥çœ‹æ—¥å¿—
tail -20 logs/cron.log
```

**é¢„æœŸç»“æœ**ï¼š
- âœ… çœ‹åˆ° "æ’è¡Œæ¦œæ•°æ®è·å–æˆåŠŸ"
- âœ… çœ‹åˆ° "èµ›é¢˜æ•°æ®è·å–æˆåŠŸ"ï¼ˆå¦‚æœä»Šå¤©æœ‰æ–°é¢˜ï¼‰
- âœ… çœ‹åˆ° "æäº¤æˆåŠŸ"
- âœ… çœ‹åˆ° "æ¨é€æˆåŠŸ"

### 2. æ£€æŸ¥ GitHub

è®¿é—®ï¼š`https://github.com/your-username/alailab/commits/main`

åº”è¯¥èƒ½çœ‹åˆ°æ–°çš„æäº¤ï¼š
```
chore: update leaderboard and problems - 2025-11-06 ...
```

### 3. æ£€æŸ¥ç½‘ç«™

è®¿é—®æ‚¨çš„ GitHub Pagesï¼š
- æ’è¡Œæ¦œé¡µé¢ï¼šæ•°æ®å·²æ›´æ–°
- ä¸‹è½½é¡µé¢ï¼šæ–°èµ›é¢˜æ–‡ä»¶å·²æ˜¾ç¤º

### 4. æŸ¥çœ‹å®šæ—¶ä»»åŠ¡

```bash
# æŸ¥çœ‹ Cron é…ç½®
crontab -l

# åº”è¯¥çœ‹åˆ°ç±»ä¼¼ï¼š
# 0 2,14 * * * cd /var/www/formallm1 && bash server/auto_update.sh ...
```

---

## ğŸ“Š å·¥ä½œåŸç†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Cron å®šæ—¶ä»»åŠ¡ï¼ˆäº‘æœåŠ¡å™¨ï¼‰                    â”‚
â”‚  â”œâ”€ æ¯å¤© 2:00  è§¦å‘                          â”‚
â”‚  â””â”€ æ¯å¤© 14:00 è§¦å‘                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  auto_update.sh                               â”‚
â”‚  â”œâ”€ git pullï¼ˆæ‹‰å–æœ€æ–°ä»£ç ï¼‰                  â”‚
â”‚  â”œâ”€ fetch_leaderboard.pyï¼ˆè·å–æ’è¡Œæ¦œï¼‰        â”‚
â”‚  â”œâ”€ fetch_problems.pyï¼ˆè·å–èµ›é¢˜ï¼‰             â”‚
â”‚  â”œâ”€ git commitï¼ˆæäº¤æ›´æ”¹ï¼‰                    â”‚
â”‚  â””â”€ git pushï¼ˆæ¨é€åˆ° GitHubï¼‰                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GitHub Repository                            â”‚
â”‚  â”œâ”€ æ¥æ”¶æ¨é€                                  â”‚
â”‚  â””â”€ è§¦å‘ GitHub Pages éƒ¨ç½²                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GitHub Pages                                 â”‚
â”‚  â””â”€ ç”¨æˆ·è®¿é—®ç½‘ç«™ï¼Œçœ‹åˆ°æœ€æ–°æ•°æ®                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ› ï¸ æ–‡ä»¶è¯´æ˜

### æ–°å¢/ä¿®æ”¹çš„æ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ | çŠ¶æ€ |
|------|------|------|
| `server/fetch_leaderboard.py` | è·å–æ’è¡Œæ¦œæ•°æ® | âœ… å·²å­˜åœ¨ |
| `server/fetch_problems.py` | è·å–æ¯æ—¥èµ›é¢˜ | â­ æ–°å¢ |
| `server/auto_update.sh` | è‡ªåŠ¨æ›´æ–°è„šæœ¬ | â­ å·²å¢å¼º |
| `server/QUICK_SETUP.sh` | å¿«é€Ÿé…ç½®è„šæœ¬ | â­ æ–°å¢ |
| `SERVER_DEPLOYMENT_GUIDE.md` | è¯¦ç»†éƒ¨ç½²æŒ‡å— | â­ æ–°å¢ |

### æ•°æ®æ–‡ä»¶ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰

| æ–‡ä»¶ | è¯´æ˜ | æ›´æ–°æ–¹å¼ |
|------|------|---------|
| `assets/data/leaderboard.json` | æ’è¡Œæ¦œæ•°æ® | è‡ªåŠ¨æ›´æ–° |
| `assets/data/downloads.json` | ä¸‹è½½é…ç½® | è‡ªåŠ¨æ›´æ–° |
| `assets/files/lean_MMDD.jsonl` | Lean èµ›é¢˜ | è‡ªåŠ¨æ–°å¢ |
| `assets/files/litex_MMDD.jsonl` | Litex èµ›é¢˜ | è‡ªåŠ¨æ–°å¢ |

---

## ğŸ” ç›‘æ§å‘½ä»¤

```bash
# æŸ¥çœ‹å®æ—¶æ—¥å¿—
tail -f /var/www/formallm1/logs/cron.log

# æŸ¥çœ‹ä»Šæ—¥è¯¦ç»†æ—¥å¿—
tail -f /var/www/formallm1/logs/update_$(date +%Y%m%d).log

# æŸ¥çœ‹æœ€è¿‘çš„ Git æäº¤
cd /var/www/formallm1
git log --oneline -5

# æŸ¥çœ‹å®šæ—¶ä»»åŠ¡
crontab -l

# æŸ¥çœ‹æ•°æ®æ›´æ–°æ—¶é—´
cd /var/www/formallm1
cat assets/data/leaderboard.json | python3 -c "import json,sys; print(json.load(sys.stdin)['lastUpdated'])"
```

---

## âš ï¸ é‡è¦æé†’

### API ç«¯ç‚¹éœ€è¦ç¡®è®¤

**èµ›é¢˜ API ç«¯ç‚¹**ï¼ˆ`server/fetch_problems.py` ç¬¬ 35-36 è¡Œï¼‰ï¼š
```python
url = f"{API_BASE_URL}/problems/daily"
```

âš ï¸ **è¯·ç¡®è®¤æ‚¨çš„ API æ˜¯å¦æ”¯æŒæ­¤ç«¯ç‚¹ï¼**

å¦‚æœä¸æ”¯æŒï¼Œæœ‰ä»¥ä¸‹é€‰æ‹©ï¼š
1. **æ‰‹åŠ¨ä¸Šä¼ èµ›é¢˜**ï¼šç»§ç»­åƒç°åœ¨ä¸€æ ·æ‰‹åŠ¨ä¸Šä¼ èµ›é¢˜æ–‡ä»¶
2. **ä¿®æ”¹è„šæœ¬**ï¼šè°ƒæ•´ API ç«¯ç‚¹ä»¥åŒ¹é…æ‚¨çš„å®é™… API
3. **æš‚æ—¶ç¦ç”¨**ï¼šåªè‡ªåŠ¨æ›´æ–°æ’è¡Œæ¦œï¼Œèµ›é¢˜æ‰‹åŠ¨ç®¡ç†

### ç¦ç”¨èµ›é¢˜è‡ªåŠ¨è·å–

å¦‚æœæš‚æ—¶ä¸éœ€è¦è‡ªåŠ¨è·å–èµ›é¢˜ï¼Œå¯ä»¥ï¼š

**æ–¹å¼ 1**: åˆ é™¤æˆ–é‡å‘½åè„šæœ¬
```bash
mv server/fetch_problems.py server/fetch_problems.py.disabled
```

**æ–¹å¼ 2**: ä¿®æ”¹ `auto_update.sh`ï¼Œæ³¨é‡Šæ‰èµ›é¢˜è·å–éƒ¨åˆ†ï¼ˆç¬¬ 99-110 è¡Œï¼‰

---

## ğŸ“ è·å–å¸®åŠ©

é‡åˆ°é—®é¢˜ï¼Ÿè¯·æ£€æŸ¥ï¼š
1. ğŸ“˜ è¯¦ç»†æŒ‡å—ï¼š`cat SERVER_DEPLOYMENT_GUIDE.md`
2. ğŸ“— è„šæœ¬è¯´æ˜ï¼š`cat server/README.md`  
3. ğŸ“ æŸ¥çœ‹æ—¥å¿—ï¼š`tail -50 logs/cron.log`

---

**ç¥éƒ¨ç½²é¡ºåˆ©ï¼** ğŸ‰


